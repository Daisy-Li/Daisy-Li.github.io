<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>webpack笔记 | 萨尔茨堡的树枝</title><meta name="description" content="webpack核心概念： entry 入口 一般是src&#x2F;index.js output webpack的输出 最终构建出来的静态文件 loader 模块代码转换的工作由 loader 来处理 loader是一个转换器，负责把某种文件格式的内容转换成 webpack 可以支持打包的模块。 plugin 插件 plugin 用于处理更多其他的一些构建任务 mode 构建模式  webpack开发环境"><meta name="keywords" content="webpack 前端构建"><meta name="author" content="Daisy Li"><meta name="copyright" content="Daisy Li"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://daisy-li.github.io/2021/12/03/webpack%E7%AC%94%E8%AE%B0/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="webpack笔记"><meta property="og:url" content="https://daisy-li.github.io/2021/12/03/webpack%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="萨尔茨堡的树枝"><meta property="og:description" content="webpack核心概念： entry 入口 一般是src&#x2F;index.js output webpack的输出 最终构建出来的静态文件 loader 模块代码转换的工作由 loader 来处理 loader是一个转换器，负责把某种文件格式的内容转换成 webpack 可以支持打包的模块。 plugin 插件 plugin 用于处理更多其他的一些构建任务 mode 构建模式  webpack开发环境"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/Daisy-Li/image-cloud/webpacklegao.jpeg"><meta property="article:published_time" content="2021-12-03T07:00:00.000Z"><meta property="article:modified_time" content="2021-12-10T08:13:48.493Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="React组件中向props.children传递数据" href="https://daisy-li.github.io/2021/12/08/React%E7%BB%84%E4%BB%B6%E4%B8%AD%E5%90%91props-children%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE/"><link rel="next" title="HTTP小记" href="https://daisy-li.github.io/2021/10/12/HTTP%E5%B0%8F%E8%AE%B0/"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?567250f2913fb7d73845d678b6264ecb";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">14</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">14</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书库</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack核心概念："><span class="toc-number">1.</span> <span class="toc-text">webpack核心概念：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack开发环境最基础的构建需求"><span class="toc-number">2.</span> <span class="toc-text">webpack开发环境最基础的构建需求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack5-css-背景图片无法加载问题的解决思路："><span class="toc-number">3.</span> <span class="toc-text">webpack5 css 背景图片无法加载问题的解决思路：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack-路径解析-enhanced-resolve模块"><span class="toc-number">4.</span> <span class="toc-text">webpack 路径解析 enhanced-resolve模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resolve-配置"><span class="toc-number">5.</span> <span class="toc-text">resolve 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#resolve-alias"><span class="toc-number">5.1.</span> <span class="toc-text">resolve.alias</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#resolve-extensions"><span class="toc-number">5.2.</span> <span class="toc-text">resolve.extensions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loader"><span class="toc-number">6.</span> <span class="toc-text">loader</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#loader-是一个-function"><span class="toc-number">6.1.</span> <span class="toc-text">loader 是一个 function</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#plugin"><span class="toc-number">7.</span> <span class="toc-text">plugin</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DefinePlugin"><span class="toc-number">7.1.</span> <span class="toc-text">DefinePlugin</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TerserPlugin"><span class="toc-number">7.2.</span> <span class="toc-text">TerserPlugin</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一个简单的-plugin"><span class="toc-number">8.</span> <span class="toc-text">一个简单的 plugin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#优化"><span class="toc-number">9.</span> <span class="toc-text">优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#图片优化"><span class="toc-number">9.1.</span> <span class="toc-text">图片优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#html压缩"><span class="toc-number">9.2.</span> <span class="toc-text">html压缩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#css压缩"><span class="toc-number">9.3.</span> <span class="toc-text">css压缩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js优化"><span class="toc-number">9.4.</span> <span class="toc-text">js优化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分离代码文件"><span class="toc-number">10.</span> <span class="toc-text">分离代码文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack-dev-server-快速启动一个静态服务"><span class="toc-number">11.</span> <span class="toc-text">webpack-dev-server 快速启动一个静态服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HMR"><span class="toc-number">11.1.</span> <span class="toc-text">HMR</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开发流程"><span class="toc-number">12.</span> <span class="toc-text">开发流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#create-react-app"><span class="toc-number">13.</span> <span class="toc-text">create-react-app</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack-chain"><span class="toc-number">14.</span> <span class="toc-text">webpack-chain</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wenpack-工作原理"><span class="toc-number">15.</span> <span class="toc-text">wenpack 工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#合并代码"><span class="toc-number">15.1.</span> <span class="toc-text">合并代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack结构"><span class="toc-number">16.</span> <span class="toc-text">webpack结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#工作流程"><span class="toc-number">16.1.</span> <span class="toc-text">工作流程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#提升构建速度"><span class="toc-number">17.</span> <span class="toc-text">提升构建速度</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#配置优化"><span class="toc-number">17.1.</span> <span class="toc-text">配置优化</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/Daisy-Li/image-cloud/webpacklegao.jpeg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">萨尔茨堡的树枝</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书库</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">webpack笔记</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2021-12-03 15:00:00"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2021-12-03</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2021-12-10 16:13:48"><i class="fas fa-history fa-fw"></i> 更新于 2021-12-10</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><i class="fas fa-angle-right post-meta__separator"></i><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/%E5%89%8D%E7%AB%AF/%E7%BB%8F%E9%AA%8C%E6%B2%89%E6%B7%80/">经验沉淀</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">3k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 10 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="far fa-comments fa-fw post-meta__icon"></i><span>评论数:</span><a href="/2021/12/03/webpack%E7%AC%94%E8%AE%B0/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2021/12/03/webpack%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h3 id="webpack核心概念："><a href="#webpack核心概念：" class="headerlink" title="webpack核心概念："></a>webpack核心概念：</h3><ul>
<li><strong>entry</strong> 入口 一般是src/index.js</li>
<li><strong>output</strong> webpack的输出 最终构建出来的静态文件</li>
<li><strong>loader</strong> 模块代码转换的工作由 loader 来处理 loader是一个转换器，负责把某种文件格式的内容转换成 webpack 可以支持打包的模块。</li>
<li><strong>plugin</strong> 插件 plugin 用于处理更多其他的一些构建任务</li>
<li><strong>mode</strong> 构建模式</li>
</ul>
<h3 id="webpack开发环境最基础的构建需求"><a href="#webpack开发环境最基础的构建需求" class="headerlink" title="webpack开发环境最基础的构建需求"></a>webpack开发环境最基础的构建需求</h3><ul>
<li>构建我们发布需要的 HTML、CSS、JS 文件</li>
<li>使用 CSS 预处理器来编写样式</li>
<li>引用图片</li>
<li>使用 Babel 来支持 ES 新特性</li>
<li>本地提供静态服务以方便开发调试</li>
</ul>
<h3 id="webpack5-css-背景图片无法加载问题的解决思路："><a href="#webpack5-css-背景图片无法加载问题的解决思路：" class="headerlink" title="webpack5 css 背景图片无法加载问题的解决思路："></a>webpack5 css 背景图片无法加载问题的解决思路：</h3><p>webpack5 增加了asset mudule（资源模块）<br><a href="https://blog.csdn.net/Coralpapy/article/details/119419137" target="_blank" rel="noopener">https://blog.csdn.net/Coralpapy/article/details/119419137</a></p>
<p>webpack的初衷是让js支持模块化管理。所谓 webpack 构建的起点，本质上也是一个 module，而我们在设置好 webpack 后，开发的过程亦是在写一个个的业务 module。</p>
<h3 id="webpack-路径解析-enhanced-resolve模块"><a href="#webpack-路径解析-enhanced-resolve模块" class="headerlink" title="webpack 路径解析 enhanced-resolve模块"></a>webpack 路径解析 enhanced-resolve模块</h3><ul>
<li><p>解析相对路径</p>
<ol>
<li>查找相对当前模块的路径下是否有对应文件或文件夹</li>
<li>是文件则直接加载</li>
<li>是文件夹则继续查找文件夹下的 package.json 文件</li>
<li>有 package.json 文件则按照文件中 <code>main</code> 字段的文件名来查找文件</li>
<li>无 package.json 或者无 <code>main</code> 字段则查找 <code>index.js</code> 文件</li>
</ol>
</li>
<li><p>解析模块名<br>查找当前文件目录下，父级目录及以上目录下的 <code>node_modules</code> 文件夹，看是否有对应名称的模块</p>
</li>
<li><p>解析绝对路径（不建议使用）<br>直接查找对应路径的文件</p>
</li>
</ul>
<p>在 webpack 配置中，和模块路径解析相关的配置都在 <code>resolve</code> 字段下</p>
<h3 id="resolve-配置"><a href="#resolve-配置" class="headerlink" title="resolve 配置"></a>resolve 配置</h3><h4 id="resolve-alias"><a href="#resolve-alias" class="headerlink" title="resolve.alias"></a><code>resolve.alias</code></h4><p>路径别名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;@&quot;: paths.appSrc,  </span><br><span class="line">&quot;@components&quot;: paths.appComponent,  </span><br><span class="line">&quot;@pages&quot;: paths.appPage,</span><br></pre></td></tr></table></figure>
<h4 id="resolve-extensions"><a href="#resolve-extensions" class="headerlink" title="resolve.extensions"></a><code>resolve.extensions</code></h4><p>路径补全：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">extensions: [&#39;.wasm&#39;, &#39;.mjs&#39;, &#39;.js&#39;, &#39;.json&#39;, &#39;.jsx&#39;], </span><br><span class="line">&#x2F;&#x2F; 这里的顺序代表匹配后缀的优先级，例如对于 index.js 和 index.jsx，会优先选择 index.js</span><br></pre></td></tr></table></figure>
<h3 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h3><p>由于 loader 处理的是我们代码模块的内容转换，所以都是在 <code>module.rules</code> 中添加新的配置规则，在该字段中，每一项被视为一条匹配使用 loader 的规则。</p>
<p>test,include,exclude,use,type，enforce（指定顺序）关键配置项</p>
<ul>
<li>同一规则顺序：从后到前</li>
<li>不同规则顺序：<strong>前置 -&gt; 行内 -&gt; 普通 -&gt; 后置</strong></li>
</ul>
<p>webpack 的 loader 相关配置都在 <code>module.rules</code> 字段下，我们需要通过 <code>test</code>、<code>include</code>、<code>exclude</code> 等配置好应用 loader 的条件规则，然后使用 <code>use</code> 来指定需要用到的 loader，配置应用的 loader 时还需要注意一下 loader 的执行顺序。</p>
<h4 id="loader-是一个-function"><a href="#loader-是一个-function" class="headerlink" title="loader 是一个 function"></a>loader 是一个 function</h4><p>接收模块代码的内容，然后返回代码内容转化后的结果</p>
<ul>
<li>最后的 loader 最早调用，传入原始的资源内容（可能是代码，也可能是二进制文件，用 buffer 处理）</li>
<li>第一个 loader 最后调用，期望返回是 JS 代码和 sourcemap 对象（可选）</li>
<li>中间的 loader 执行时，传入的是上一个 loader 执行的结果</li>
</ul>
<h3 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a>plugin</h3><h4 id="DefinePlugin"><a href="#DefinePlugin" class="headerlink" title="DefinePlugin"></a>DefinePlugin</h4><p>DefinePlugin 是 webpack 内置的插件，可以使用 <code>webpack.DefinePlugin</code> 直接获取，前边也提过，在不同的 mode 中，会使用 DefinePlugin 来设置运行时的 <code>process.env.NODE_ENV</code> 常量。<br>社区中关于 DefinePlugin 使用得最多的方式是定义环境常量。</p>
<h4 id="TerserPlugin"><a href="#TerserPlugin" class="headerlink" title="TerserPlugin"></a>TerserPlugin</h4><p>webpack mode 为 production 时会启用 TerserPlugin 来压缩 JS 代码</p>
<h3 id="一个简单的-plugin"><a href="#一个简单的-plugin" class="headerlink" title="一个简单的 plugin"></a>一个简单的 plugin</h3><p>plugin 的实现可以是一个类，使用时传入相关配置来创建一个实例，而 plugin 实例中最重要的方法是 <code>apply</code>，该方法在 webpack compiler 安装插件时会被调用一次，<code>apply</code> 接收 webpack compiler 对象实例的引用，你可以在 compiler 对象实例上注册各种事件钩子函数，来影响 webpack 的所有构建流程，以便完成更多其他的构建任务。</p>
<p>事件钩子可以理解为当 webpack 运行中执行到某个钩子的状态时，便会触发你注册的事件，即发布订阅模式。<br>关于 webpack hooks 底层的实现，其实都是基于 webpack 作者开发的 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fwebpack%2Ftapable%2F" title="https://github.com/webpack/tapable/">tapable</a> 这个库提供的钩子函数。</p>
<h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><h4 id="图片优化"><a href="#图片优化" class="headerlink" title="图片优化"></a>图片优化</h4><ol>
<li>image-webpack-loader</li>
<li>url-loader limit属性，小于一定值则转换为base64编码的DataURL</li>
</ol>
<h4 id="html压缩"><a href="#html压缩" class="headerlink" title="html压缩"></a>html压缩</h4><p>HtmlWebpackPlugin minify属性</p>
<h4 id="css压缩"><a href="#css压缩" class="headerlink" title="css压缩"></a>css压缩</h4><p>MiniCssExtractPlugin</p>
<h4 id="js优化"><a href="#js优化" class="headerlink" title="js优化"></a>js优化</h4><ol>
<li>mode选择production 即可默认开启各种 JS 代码压缩优化的配置。</li>
<li>Tree shaking </li>
<li>sideEffects</li>
<li>concatenateModules </li>
</ol>
<p>tree shaking 依赖于 ES2015 模块系统中的<a href="https://link.juejin.cn/?target=http%3A%2F%2Fexploringjs.com%2Fes6%2Fch_modules.html%23static-module-structure" title="http://exploringjs.com/es6/ch_modules.html#static-module-structure">静态结构特性</a>，可以移除 JavaScript 上下文中的未引用代码，删掉用不着的代码，能够有效减少 JS 代码文件的大小。</p>
<p>sideEffects 是什么呢？我用一句话来概括就是：让 webpack 去除 tree shaking 带来副作用的代码。</p>
<p>webpack 的 tree shaking 依赖于 babel编译 + UglifyJS 压缩，这个过程是没有完善的程序流分析，UglifyJS 没有完善的程序流分析。它可以简单的判断变量后续是否被引用、修改，但是不能判断一个变量完整的修改过程，不知道它是否已经指向了外部变量，所以很多有可能会产生副作用的代码，都只能保守的不删除。</p>
<p>解释：<a href="https://zhuanlan.zhihu.com/p/41795312" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/41795312</a></p>
<h3 id="分离代码文件"><a href="#分离代码文件" class="headerlink" title="分离代码文件"></a>分离代码文件</h3><p><code>optimization.splitChunks</code> 配置来拆分代码文件的技巧，包括抽离公共部分代码</p>
<p>按需加载异步代码模块：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import 作为一个方法使用，传入模块名即可，返回一个 promise 来获取模块暴露的对象 </span></span><br><span class="line"><span class="comment">// 注释 webpackChunkName: "jquery" 可以用于指定 chunk 的名称，在输出文件时有用 </span></span><br><span class="line"><span class="keyword">import</span>(<span class="comment">/* webpackChunkName: "jquery" */</span> <span class="string">'jquery'</span>).then(<span class="function">(<span class="params">$</span>) =&gt;</span> &#123; </span><br><span class="line"><span class="built_in">console</span>.log($); </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="webpack-dev-server-快速启动一个静态服务"><a href="#webpack-dev-server-快速启动一个静态服务" class="headerlink" title="webpack-dev-server 快速启动一个静态服务"></a>webpack-dev-server 快速启动一个静态服务</h3><ul>
<li>public 字段用于指定静态服务的域名 默认是 <a href="http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a></li>
<li>port 字段用于指定静态服务的端口 默认8080</li>
<li>publicPath 字段用于指定构建好的静态文件在浏览器中用什么路径去访问，默认是 <code>/</code></li>
<li>proxy 用于配置 webpack-dev-server 将特定 URL 的请求代理到另外一台服务器上</li>
<li>contentBase 用于配置提供额外静态文件内容的目录</li>
</ul>
<p>建议将 <code>devServer.publicPath</code> 和 <code>output.publicPath</code> 的值保持一致。</p>
<h4 id="HMR"><a href="#HMR" class="headerlink" title="HMR"></a>HMR</h4><p>hot: true</p>
<p>首先我们要知道一个概念：webpack 内部运行时，会维护一份用于管理构建代码时各个模块之间交互的表数据，webpack 官方称之为 <strong>Manifest</strong>，其中包括入口代码文件和构建出来的 bundle 文件的对应关系。</p>
<p><img src= "/img/loading.gif" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f898ae316ac64fa98c9f694d6f19da2f~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p>
<h3 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h3><p>区分开发环境：</p>
<p>webpack.config.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">env, argv</span>) =&gt;</span> (&#123; </span><br><span class="line">    mode: env.production ? <span class="string">'production'</span> : <span class="string">'development'</span>, <span class="comment">// 从 env 参数获取 mode </span></span><br><span class="line">    devtool: env.production ? <span class="literal">false</span> : <span class="string">'eval-cheap-source-map'</span>, <span class="comment">// 开发环境需要 source map &#125;)</span></span><br></pre></td></tr></table></figure>
<p>package.json：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"build:pro"</span>: <span class="string">"webpack --env.production"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>拆分文件，使用<code>webpack-merge</code>插件</p>
<ul>
<li>webpack.base.js：基础部分，即多个文件中共享的配置</li>
<li>webpack.development.js：开发环境使用的配置</li>
<li>webpack.production.js：生产环境使用的配置</li>
<li>webpack.test.js：测试环境使用的配置</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> WebPackMerge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>) </span><br><span class="line"><span class="keyword">const</span> base = <span class="built_in">require</span>(<span class="string">'./webpack.base.js'</span>) </span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = WebPackMerge(base, &#123; </span><br><span class="line">    <span class="built_in">module</span>: &#123; </span><br><span class="line">        rules: [ </span><br><span class="line">            <span class="comment">// 用 WebPackMerge API，当这里的匹配规则相同且 use 值都是数组时，smart 会识别后处理 </span></span><br><span class="line">            <span class="comment">// 和上述 base 配置合并后，这里会是 &#123; test: /\.js$/, use: ['babel', 'coffee'] &#125; </span></span><br><span class="line">            <span class="comment">// 如果这里 use 的值用的是字符串或者对象的话，那么会替换掉原本的规则 use 的值 </span></span><br><span class="line">            &#123; </span><br><span class="line">                test: <span class="regexp">/\.js$/</span>, </span><br><span class="line">                use: [<span class="string">'coffee'</span>], </span><br><span class="line">            &#125;, </span><br><span class="line">            <span class="comment">// ... </span></span><br><span class="line">        ], </span><br><span class="line">   &#125;, </span><br><span class="line">   plugins: [ </span><br><span class="line">       <span class="comment">// plugins 这里的数组会和 base 中的 plugins 数组进行合并 </span></span><br><span class="line">       <span class="keyword">new</span> webpack.DefinePlugin(&#123; </span><br><span class="line">           <span class="string">'process.env.NODE_ENV'</span>: <span class="built_in">JSON</span>.stringify(process.env.NODE_ENV), </span><br><span class="line">       &#125;), </span><br><span class="line">   ], </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>package.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "serve": "webpack-dev-server --config config/webpack.config.dev.js --mode development --colors",</span><br><span class="line">    "build:yufa": "rm -rf deploy/* &amp;&amp; webpack --config config/webpack.config.beta.js --mode development --colors --progress",</span><br><span class="line">    "build": "rm -rf deploy/* &amp;&amp; webpack --config config/webpack.config.prod.js --mode production --colors --progress",</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="create-react-app"><a href="#create-react-app" class="headerlink" title="create-react-app"></a>create-react-app</h3><ul>
<li>eject</li>
<li>react-app-rewired</li>
</ul>
<h3 id="webpack-chain"><a href="#webpack-chain" class="headerlink" title="webpack-chain"></a>webpack-chain</h3><p>@vue/cli 提供了一种基于链式 api 的 webpack 配置方式，并且它内部的 webpack 配置也是用这种方式维护的，而这种配置方式的核心类库就是 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fneutrinojs%2Fwebpack-chain" title="https://github.com/neutrinojs/webpack-chain">webpack-chain</a>。</p>
<h3 id="wenpack-工作原理"><a href="#wenpack-工作原理" class="headerlink" title="wenpack 工作原理"></a>wenpack 工作原理</h3><p>webpack 本质上就是一个 JS 模块 Bundler，用于将多个代码模块进行打包。</p>
<h4 id="合并代码"><a href="#合并代码" class="headerlink" title="合并代码"></a>合并代码</h4><p>主要解决两个问题：</p>
<ol>
<li>文件合并时的顺序很难确定 （模块依赖树）</li>
<li>代码文件内变量和方法命名容易冲突 (模块化)</li>
</ol>
<p>在已经解析出依赖关系的前提下，webpack 会利用 JavaScript Function 的特性提供一些代码来将各个模块整合到一起，即是将每一个模块包装成一个 JS Function，提供一个引用依赖模块的方法，如下面例子中的 <code>__webpack__require__</code>，这样做，既可以避免变量相互干扰，又能够有效控制执行顺序，(生产环境中可以用唯一的模块 id 去调整模块内变量名防止冲突)简单的代码例子如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">modules[<span class="string">'./entry.js'</span>] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">const</span> &#123; bar &#125; = __webpack__require__(<span class="string">'./bar.js'</span>) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="webpack结构"><a href="#webpack结构" class="headerlink" title="webpack结构"></a>webpack结构</h3><ul>
<li>Compiler，webpack 的运行入口，实例化时定义 webpack 构建主要流程，同时创建构建时使用的核心对象 compilation</li>
<li>Compilation，由 Compiler 实例化，存储构建过程中各流程使用到的数据，用于控制这些数据的变化</li>
<li>Chunk，即用于表示 chunk 的类，即构建流程中的主干，一般情况下一个入口会对应一个 chunk，对于构建时需要的 chunk 对象由 Compilation 创建后保存管理</li>
<li>Parser，其中相对复杂的一个部分，基于 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Facornjs%2Facorn" title="https://github.com/acornjs/acorn">acorn</a> 来分析 AST 语法树，解析出代码模块的依赖</li>
<li>Module，用于表示代码模块的类，衍生出很多子类用于处理不同的情况，关于代码模块的所有信息都会存在 Module 实例中，例如 <code>dependencies</code> 记录代码模块的依赖等</li>
<li>Dependency，解析时用于保存代码模块对应的依赖使用的对象</li>
<li>Template，生成最终代码要使用到的代码模板，像上述提到的 function 代码就是用对应的 Template 来生成</li>
</ul>
<h4 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">创建 Compiler -&gt; </span><br><span class="line">调用 compiler.run 开始构建 -&gt; </span><br><span class="line">创建 Compilation -&gt; </span><br><span class="line">基于配置开始创建 Chunk -&gt; </span><br><span class="line">使用 Parser 从 Chunk 开始解析依赖 -&gt; </span><br><span class="line">使用 Module 和 Dependency 管理代码模块相互关系 -&gt; </span><br><span class="line">使用 Template 基于 Compilation 的数据生成结果代码 -&gt;</span><br></pre></td></tr></table></figure>
<h3 id="提升构建速度"><a href="#提升构建速度" class="headerlink" title="提升构建速度"></a>提升构建速度</h3><p>提升 webpack 构建速度本质上就是想办法让 webpack 少干点活，活少了速度自然快了，尽量避免 webpack 去做一些不必要的事情，记得这个主要方向，后续的针对构建速度的优化都是围绕着这一方向展开。</p>
<h4 id="配置优化"><a href="#配置优化" class="headerlink" title="配置优化"></a>配置优化</h4><ol>
<li>减少 <code>resolve</code> 的解析 </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  modules: [</span><br><span class="line">    path.resolve(__dirname, <span class="string">'node_modules'</span>), <span class="comment">// 使用绝对路径指定 node_modules，不做过多查询</span></span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 删除不必要的后缀自动补全，少了文件后缀的自动匹配，即减少了文件路径查询的工作</span></span><br><span class="line">  <span class="comment">// 其他文件可以在编码时指定后缀，如 import('./index.scss')</span></span><br><span class="line">  extensions: [<span class="string">".js"</span>], </span><br><span class="line"></span><br><span class="line">  <span class="comment">// 避免新增默认文件，编码时使用详细的文件路径，代码会更容易解读，也有益于提高构建速度</span></span><br><span class="line">  mainFiles: [<span class="string">'index'</span>],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>把 loader 应用的文件范围缩小</li>
</ol>
<p>我们在使用 loader 的时候，尽可能把 loader 应用的文件范围缩小，只在最少数必须的代码模块中去使用必要的 loader，例如 node_modules 目录下的其他依赖类库文件，基本就是直接编译好可用的代码，无须再经过 loader 处理了：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">    &#123; </span><br><span class="line">        test: <span class="regexp">/\.jsx?/</span>, </span><br><span class="line">        include: [ path.resolve(__dirname, <span class="string">'src'</span>), </span><br><span class="line">        <span class="comment">// 限定只在 src 目录下的 js/jsx 文件需要经 babel-loader 处理 </span></span><br><span class="line">        <span class="comment">// 通常我们需要 loader 处理的文件都是存放在 src 目录 ], </span></span><br><span class="line">        use: <span class="string">'babel-loader'</span>, </span><br><span class="line">    &#125;, </span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>减少 plugin 的消耗</li>
</ol>
<p>区分mode</p>
<ol start="4">
<li>选择合适的 devtool</li>
</ol>
<p>在构建生产环境代码时不输出 sourcemap，而开发环境时一般选用 <code>eval-cheap-source-map</code> 来确保 sourcemap 基本可用的情况下还有着不错的构建速度。</p>
<p><img src= "/img/loading.gif" data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ab309339c9c4131842cb68822f4d447~tplv-k3u1fbpfcp-watermark.image?" alt="A.jpg"></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Daisy Li</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://daisy-li.github.io/2021/12/03/webpack%E7%AC%94%E8%AE%B0/">https://daisy-li.github.io/2021/12/03/webpack%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://daisy-li.github.io" target="_blank">萨尔茨堡的树枝</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%8A%80%E6%9C%AF/">技术</a><a class="post-meta__tags" href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/">构建工具</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Daisy-Li/image-cloud/react.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/12/08/React%E7%BB%84%E4%BB%B6%E4%B8%AD%E5%90%91props-children%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE/"><img class="prev-cover" data-src="https://cdn.jsdelivr.net/gh/Daisy-Li/image-cloud/meitu.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">React组件中向props.children传递数据</div></div></a></div><div class="next-post pull-right"><a href="/2021/10/12/HTTP%E5%B0%8F%E8%AE%B0/"><img class="next-cover" data-src="https://cdn.jsdelivr.net/gh/Daisy-Li/image-cloud/http.jpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">HTTP小记</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/07/09/H5页面性能优化之加载篇/" title="H5页面性能优化之加载篇"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/07/14/E6bln1rOI9ePiBm.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-09</div><div class="relatedPosts_title">H5页面性能优化之加载篇</div></div></a></div><div class="relatedPosts_item"><a href="/2021/06/30/ES6入门——let和const命令/" title="ES6学习笔记（一）"><img class="relatedPosts_cover" data-src="https://cdn.jsdelivr.net/gh/Daisy-Li/image-cloud/src=http___img-bss.csdn.net_201703031056227323.jpg&refer=http___img-bss.csdn.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-30</div><div class="relatedPosts_title">ES6学习笔记（一）</div></div></a></div><div class="relatedPosts_item"><a href="/2020/09/29/FLIP技术让动画更流畅/" title="FLIP技术让动画更流畅"><img class="relatedPosts_cover" data-src="https://i.loli.net/2020/10/10/5ZVQCz8bSNDrYxI.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-29</div><div class="relatedPosts_title">FLIP技术让动画更流畅</div></div></a></div><div class="relatedPosts_item"><a href="/2021/10/11/JS对Iframe内外页面进行操作/" title="JS对Iframe内外页面进行操作"><img class="relatedPosts_cover" data-src="https://cdn.jsdelivr.net/gh/Daisy-Li/image-cloud/src=http___inews.gtimg.com_newsapp_match_0_10890976489_0.jpg&refer=http___inews.gtimg.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-10-11</div><div class="relatedPosts_title">JS对Iframe内外页面进行操作</div></div></a></div><div class="relatedPosts_item"><a href="/2021/12/08/React组件中向props-children传递数据/" title="React组件中向props.children传递数据"><img class="relatedPosts_cover" data-src="https://cdn.jsdelivr.net/gh/Daisy-Li/image-cloud/meitu.jpeg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-08</div><div class="relatedPosts_title">React组件中向props.children传递数据</div></div></a></div><div class="relatedPosts_item"><a href="/2021/06/25/指尖下的交互——移动端手势操作/" title="指尖下的交互——移动端手势操作"><img class="relatedPosts_cover" data-src="https://cdn.jsdelivr.net/gh/Daisy-Li/image-cloud/%E6%8C%87%E5%B0%96%E4%B8%8B%E7%9A%84%E4%BA%A4%E4%BA%92%E2%80%94%E2%80%94%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%89%8B%E5%8A%BF%E6%93%8D%E4%BD%9C.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-25</div><div class="relatedPosts_title">指尖下的交互——移动端手势操作</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'geRQtsH2ueMhK48xgwNdJ0e1-gzGzoHsz',
  appKey: 'gfe6O9wG3PA9s0T1dDlYpmvj',
  placeholder: '我的一生最美好的场景 就是遇见你...(昵称栏输入QQ，可以自动获取昵称和邮箱哦！)',
  avatar: 'retro',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: true,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/Daisy-Li/image-cloud/webpacklegao.jpeg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Daisy Li</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my blog!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script defer id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/third-party/click_heart.js"></script><script src="https://myhkw.cn/player/js/player.js" id="myhk" key="159463572239"></script></body></html>